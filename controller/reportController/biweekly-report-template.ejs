<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css">
      body {
        color: #566787;
        background: #f5f5f5;
        max-width: 80%;
        align-items: flex-start;
        text-align-last: center;

        font-size: 20px;
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-4">
              <h2>Current <b>LeaderBoard</b></h2>
            </div>
            <div class="col-sm-8"></div>
          </div>
        </div>

        <table class="table table-striped table-hover">
          <thead>
            <tr style="width: 20%;">
              <th>Name</th>
              <th>Points</th>
              <th>Current <br />Rank</th>
              <th>
                Previous<br />
                Rank
              </th>
            </tr>
          </thead>
          <tbody>
            <% if (entries.length > 0) { %> <% entries.forEach(entry => {%>
            <tr style="width: 20%;">
              <td><a href="#"><%= entry.name %> </a></td>
              <td><%= entry.points %></td>
              <td><%= entry.current_rank %></td>
              <td><%= entry.old_rank %></td>
            </tr>
            <% });%> <% }%>
          </tbody>
        </table>
      </div>
      <% if (users.length > 0) { %> <% users.forEach(user => {%>

      <div>
        <br />
        <h3><%= user.name %></h3>
        <h4><%= user.role %></h4>
        <h4><%= user.email %></h4>
        <br />
        <h4>Details:</h4>
        <h4>
          Old Rank : <%= user.old_rank %> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Current
          rank: <%= user.current_rank %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Points:
          <%= user.points %>
        </h4>

        <% if ( user.allotedPoints ) { %>
        <h4>Point Transactions:</h4>
        <% user.allotedPoints.forEach(point => {%>
        <h5>
          Awarded <%= point.points_awarded %> points for <%= point.reason %> by
          <%= point.name %><br />
        </h5>

        <% });%> <% }%>
      </div>

      <% });%> <% }%>
    </div>
  </body>
</html>
